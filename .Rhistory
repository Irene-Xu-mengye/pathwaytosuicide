FirstTime_sureof_place_for_This_Attempt * 60, FirstTime_sureof_place_for_This_Attempt)))))))
##```
## ```{r BinsTotalPthwy}
five_year <- 5*365*24*60*60
one_year <- 365*24*60*60
six_month <- one_year/2
one_month <- 30*24*60*60
two_week <- 14*24*60*60
one_week <- 7*24*60*60
three_day <- 3*24*60*60
one_day <- 24*60*60
an_hour <- 60*60
a_minute <- 60
data_totalPthwy <- data_transformedTime %>%
mutate(MullingStarts_Seconds_index =
ifelse(MullingStarts_Seconds <= a_minute, 17,
ifelse(MullingStarts_Seconds <= a_minute*5, 16,
ifelse(MullingStarts_Seconds <= a_minute*15, 15,
ifelse(MullingStarts_Seconds <= a_minute*30, 14,
ifelse(MullingStarts_Seconds <= an_hour, 13,
ifelse(MullingStarts_Seconds <= an_hour*2, 12,
ifelse(MullingStarts_Seconds <= an_hour*3, 11,
ifelse(MullingStarts_Seconds <= an_hour*6, 10,
ifelse(MullingStarts_Seconds <= an_hour*12, 9,
ifelse(MullingStarts_Seconds <= one_day, 8,
ifelse(MullingStarts_Seconds <= one_day*3, 7,
ifelse(MullingStarts_Seconds <= one_week, 6,
ifelse(MullingStarts_Seconds <= two_week, 5,
ifelse(MullingStarts_Seconds <= one_month, 4,
ifelse(MullingStarts_Seconds <= six_month, 3,
ifelse(MullingStarts_Seconds <= one_year, 2,
ifelse(MullingStarts_Seconds <= five_year, 1, 0
)))))))))))))))))) %>%
mutate(Decision_Seconds_index =
ifelse(Decision_Seconds <= a_minute, 17,
ifelse(Decision_Seconds <= a_minute*5, 16,
ifelse(Decision_Seconds <= a_minute*15, 15,
ifelse(Decision_Seconds <= a_minute*30, 14,
ifelse(Decision_Seconds <= an_hour, 13,
ifelse(Decision_Seconds <= an_hour*2, 12,
ifelse(Decision_Seconds <= an_hour*3, 11,
ifelse(Decision_Seconds <= an_hour*6, 10,
ifelse(Decision_Seconds <= an_hour*12, 9,
ifelse(Decision_Seconds <= one_day, 8,
ifelse(Decision_Seconds <= one_day*3, 7,
ifelse(Decision_Seconds <= one_week, 6,
ifelse(Decision_Seconds <= two_week, 5,
ifelse(Decision_Seconds <= one_month, 4,
ifelse(Decision_Seconds <= six_month, 3,
ifelse(Decision_Seconds <= one_year, 2,
ifelse(Decision_Seconds <= five_year, 1, 0
)))))))))))))))))) %>%
mutate(SurePlace_Seconds_index =
ifelse(SurePlace_Seconds <= a_minute, 17,
ifelse(SurePlace_Seconds <= a_minute*5, 16,
ifelse(SurePlace_Seconds <= a_minute*15, 15,
ifelse(SurePlace_Seconds <= a_minute*30, 14,
ifelse(SurePlace_Seconds <= an_hour, 13,
ifelse(SurePlace_Seconds <= an_hour*2, 12,
ifelse(SurePlace_Seconds <= an_hour*3, 11,
ifelse(SurePlace_Seconds <= an_hour*6, 10,
ifelse(SurePlace_Seconds <= an_hour*12, 9,
ifelse(SurePlace_Seconds <= one_day, 8,
ifelse(SurePlace_Seconds <= one_day*3, 7,
ifelse(SurePlace_Seconds <= one_week, 6,
ifelse(SurePlace_Seconds <= two_week, 5,
ifelse(SurePlace_Seconds <= one_month, 4,
ifelse(SurePlace_Seconds <= six_month, 3,
ifelse(SurePlace_Seconds <= one_year, 2,
ifelse(SurePlace_Seconds <= five_year, 1, 0
)))))))))))))))))) %>%
mutate(FirstMethod_Seconds_index =
ifelse(FirstMethod_Seconds <= a_minute, 17,
ifelse(FirstMethod_Seconds <= a_minute*5, 16,
ifelse(FirstMethod_Seconds <= a_minute*15, 15,
ifelse(FirstMethod_Seconds <= a_minute*30, 14,
ifelse(FirstMethod_Seconds <= an_hour, 13,
ifelse(FirstMethod_Seconds <= an_hour*2, 12,
ifelse(FirstMethod_Seconds <= an_hour*3, 11,
ifelse(FirstMethod_Seconds <= an_hour*6, 10,
ifelse(FirstMethod_Seconds <= an_hour*12, 9,
ifelse(FirstMethod_Seconds <= one_day, 8,
ifelse(FirstMethod_Seconds <= one_day*3, 7,
ifelse(FirstMethod_Seconds <= one_week, 6,
ifelse(FirstMethod_Seconds <=two_week, 5,
ifelse(FirstMethod_Seconds <= one_month, 4,
ifelse(FirstMethod_Seconds <= six_month, 3,
ifelse(FirstMethod_Seconds <= one_year, 2,
ifelse(FirstMethod_Seconds <= five_year, 1, 0
))))))))))))))))))  %>%
mutate(ThoughtsStart_Seconds_index =
ifelse(ThoughtsStart_Seconds <= a_minute, 17,
ifelse(ThoughtsStart_Seconds <= a_minute*5, 16,
ifelse(ThoughtsStart_Seconds <= a_minute*15, 15,
ifelse(ThoughtsStart_Seconds <= a_minute*30, 14,
ifelse(ThoughtsStart_Seconds <= an_hour, 13,
ifelse(ThoughtsStart_Seconds <= an_hour*2, 12,
ifelse(ThoughtsStart_Seconds <= an_hour*3, 11,
ifelse(ThoughtsStart_Seconds <= an_hour*6, 10,
ifelse(ThoughtsStart_Seconds <= an_hour*12, 9,
ifelse(ThoughtsStart_Seconds <= one_day, 8,
ifelse(ThoughtsStart_Seconds <= one_day*3, 7,
ifelse(ThoughtsStart_Seconds <= one_week, 6,
ifelse(ThoughtsStart_Seconds <=two_week, 5,
ifelse(ThoughtsStart_Seconds <= one_month, 4,
ifelse(ThoughtsStart_Seconds <= six_month, 3,
ifelse(ThoughtsStart_Seconds <= one_year, 2,
ifelse(ThoughtsStart_Seconds <= five_year, 1, 0
)))))))))))))))))) %>%
mutate(FirstPlace_Seconds_index =
ifelse(FirstPlace_Seconds <= a_minute, 17,
ifelse(FirstPlace_Seconds <= a_minute*5, 16,
ifelse(FirstPlace_Seconds <= a_minute*15, 15,
ifelse(FirstPlace_Seconds <= a_minute*30, 14,
ifelse(FirstPlace_Seconds <= an_hour, 13,
ifelse(FirstPlace_Seconds <= an_hour*2, 12,
ifelse(FirstPlace_Seconds <= an_hour*3, 11,
ifelse(FirstPlace_Seconds <= an_hour*6, 10,
ifelse(FirstPlace_Seconds <= an_hour*12, 9,
ifelse(FirstPlace_Seconds <= one_day, 8,
ifelse(FirstPlace_Seconds <= one_day*3, 7,
ifelse(FirstPlace_Seconds <= one_week, 6,
ifelse(FirstPlace_Seconds <=two_week, 5,
ifelse(FirstPlace_Seconds <= one_month, 4,
ifelse(FirstPlace_Seconds <= six_month, 3,
ifelse(FirstPlace_Seconds <= one_year, 2,
ifelse(FirstPlace_Seconds <= five_year, 1, 0
)))))))))))))))))) %>%
mutate(SureMethod_Seconds_index =
ifelse(SureMethod_Seconds <= a_minute, 17,
ifelse(SureMethod_Seconds <= a_minute*5, 16,
ifelse(SureMethod_Seconds <= a_minute*15, 15,
ifelse(SureMethod_Seconds <= a_minute*30, 14,
ifelse(SureMethod_Seconds <= an_hour, 13,
ifelse(SureMethod_Seconds <= an_hour*2, 12,
ifelse(SureMethod_Seconds <= an_hour*3, 11,
ifelse(SureMethod_Seconds <= an_hour*6, 10,
ifelse(SureMethod_Seconds <= an_hour*12, 9,
ifelse(SureMethod_Seconds <= one_day, 8,
ifelse(SureMethod_Seconds <= one_day*3, 7,
ifelse(SureMethod_Seconds <= one_week, 6,
ifelse(SureMethod_Seconds <=two_week, 5,
ifelse(SureMethod_Seconds <= one_month, 4,
ifelse(SureMethod_Seconds <= six_month, 3,
ifelse(SureMethod_Seconds <= one_year, 2,
ifelse(SureMethod_Seconds <= five_year, 1, 0
))))))))))))))))))
##```
##```{r calculateTotalPthwyMean}
# according to the ipynb calculation
data_totalPthwy <- data_totalPthwy %>%
mutate(researched = ifelse(Research_1_YES_2_NO_3_InPast_4_YES_but_not_on_Method != 2, 1, 0),
obtainedMethod = ifelse(X5.9_Obtain_Method_Sure_useforsuicide == 1, 1, 0),
drank_before_after = ifelse(X11.3_Decide_before_or_after != 1, ifelse(X11.3_Decide_before_or_after == "Both", 1, 0), 1),
NumPrep_Total = ifelse(!is.na(NumPrep),
ifelse(!is.na(researched),
ifelse(!is.na(obtainedMethod),
ifelse(!is.na(drank_before_after),
NumPrep+researched+obtainedMethod+drank_before_after,
NumPrep+researched+obtainedMethod),
ifelse(!is.na(drank_before_after), NumPrep+researched+drank_before_after)),
ifelse(!is.na(obtainedMethod),
ifelse(!is.na(drank_before_after), NumPrep+obtainedMethod+drank_before_after, NumPrep+obtainedMethod),
ifelse(!is.na(drank_before_after), NumPrep+drank_before_after, NumPrep))),
ifelse(!is.na(researched),
ifelse(!is.na(obtainedMethod),
ifelse(!is.na(drank_before_after), researched+obtainedMethod+drank_before_after, researched+obtainedMethod),
ifelse(!is.na(drank_before_after), researched+drank_before_after, researched)),
ifelse(!is.na(obtainedMethod),
ifelse(!is.na(drank_before_after), obtainedMethod+drank_before_after,obtainedMethod),
ifelse(!is.na(drank_before_after), drank_before_after, NA)))),
TotalPthwy_Max = max(MullingStarts_Seconds_index, Decision_Seconds_index, SurePlace_Seconds_index, SureMethod_Seconds_index, ThoughtsStart_Seconds_index, FirstPlace_Seconds_index, FirstMethod_Seconds_index))
data_totalPthwy$Pthwy_mean = rowMeans(subset(data_totalPthwy, select = c(MullingStarts_Seconds_index, Decision_Seconds_index, SurePlace_Seconds_index, SureMethod_Seconds_index, ThoughtsStart_Seconds_index, FirstPlace_Seconds_index, FirstMethod_Seconds_index)), na.rm = TRUE)
data_totalPthwy <- data_totalPthwy %>%
mutate(TotalpthwyMean = ifelse(!is.na(NumPrep_Total),
ifelse(!is.na(TotalPthwy_Max),
Pthwy_mean + TotalPthwy_Max * 0.5 + NumPrep_Total,
NumPrep_Total + Pthwy_mean),
ifelse(!is.na(TotalPthwy_Max),
TotalPthwy_Max * 0.5 + Pthwy_mean,
Pthwy_mean)))
write_csv(data_totalPthwy, "./Data/updated_june_2020.csv")
library(tidyverse)
data <-  read.csv(file = "./Data/HaveEvent_allVar_updated_june22.csv")
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
data <- data %>%
select(-x.axis_Value_Orig, -Unit, -Interview_Date, -IST_sub, -IST_MeanAccuracy, -IST_Mean_num_boxes_opened, -IST_MeanTrialAmount, -IST_TotalAmount, -IST_MeanDecisionTimeperPress, -IST_MeanDecisionTime, -IST_Mean_PCorrChanges, -IST_Mean_AverageAmountWons, -IST_Mean_AvgAmountRatios, -IST_Mean_AvgAmountMajChanges, -IST_Mean_AvgAmountMinChanges, -IST_FreeBlockMeanAccuracy, -IST_FreeBlockMean_num_boxes_opened, -IST_FreeBlockMeanTrialAmount, -IST_FreeBlockTotalAmount, -IST_FreeBlockMeanDecisionTimeperPress, -IST_FreeBlockMeanDecisionTime, -IST_FreeBlockMean_PCorrChanges, -IST_Mean_pCorrs, -IST_FreeBlockMean_AverageAmountWons, -IST_FreeBlockMean_AvgAmountRatios, -IST_FreeBlockMean_AvgAmountMajChanges, -IST_FreeBlockMean_AvgAmountMinChanges, -IST_CostBlockMeanAccuracy, -IST_CostBlockMean_num_boxes_opened, -IST_CostBlockMeanTrialAmount, -IST_CostBlockTotalAmount, -IST_CostBlockMeanDecisionTimeperPress, -IST_CostBlockMeanDecisionTime, -IST_CostBlockMean_PCorrChanges, -IST_CostBlockMean_AverageAmountWons, -IST_CostBlockMean_AvgAmountRatios, -IST_CostBlockMean_AvgAmountMajChanges, -IST_CostBlockMean_AvgAmountMinChanges, -CPTGNG_sub, -CPTGNG_hit_meanRT, -CPTGNG_RT_Pre_CommissionError, -CPTGNG_RT_Pre_OmmissionError, -CPTGNG_RT_Pre_CorrectTrials, -CPTGNG_RT_Post_CommissionError, -CPTGNG_RT_Post_Correct, -CPTGNG_c_bias_All, -CPTGNG_c_bias_norm_All, -CPTGNG_hits, -CPTGNG_corr_rej, -CPTGNG_OverallAccuracy, -CPTGNG_hitRate, -CPTGNG_miss_omissionErrorRate, -CPTGNG_correct_rej_Rate, -CPTGNG_falsealarm_commissionErrorRate, -CPTGNG_hit_meanSTD, -CPTGNG_FA_commissionRT, -CPTGNG_FA_commissionSTD, -CPTGNG_TotalRT, -CPTGNG_TotalRT_STD, -MDQ_sub, -MDQ_k, -MDQ_k_log10, -MDQ_MeanRT, -MDQ_FitK_k, -MDQ_Lau_k, -MDQ_FitK_m, -MDQ_FitK_LL, -SSRT_subj, -SSRT_nsort, -SSRT_nsocorrect, -SSRT_nsoincorrect, -SSRT_nsomissed, -SSRT_sopresp, -SSRT_sossd, -SSRT_sossrtMean, -SSRT_sossrtIntbyBlock, -Q_sub, -X1.1_Ever_thought_about, -X1.3_Ever_Made_An_Attempt, -X2.1_Thought_Disappear, -X2.2_Thoughts_Never_Born, -X2.3_Thoughts_Not_Worth_Living, -X2.4_Thoughts_Wish_Dead, -X2.5_Thoughts_Maybe.Should_KillSelf, -X2.6_Thoughts_Should.KillSelf, -X2.7_First_Thought, -X2.8_Age_first_had_2.7, -X2.10_Should_Kill_Age_Accuracy, -X2.2_Ever_NSSI, -X2.2_NSSI_Age_Recent, -X2.2_NSSI_MethodsCoded, -X2.3_Gesture_No_Intend_Die, -X2.3_Gesture_Age_First, -X2.3_Gesture_Age_RecentorSingle, -X2.3_Gesture_specific, -X2.4_Had_Aborted_Attempt, -X2.4_Aborted_Attempt_Notes, -X2.4_Aborted_NumTimes, -X2.4_Aborted_NumTimes_Notes, -X2.4_DateofAborted_FirstTime, -X2.4_Aborted_Recent_age, -X2.4_DateofAborted_Recent, -X2.4_Aborted_ConfirmAborted, -X2.5_Interrupted, -X2.5_Interrupted_Notes, -X2.5_Interrupted_Notes, -X2.5_DateofInterrupted_FirstTime, -X2.5_DaysBetweenINT_First_and_Interview, -X2.5_Interrupted_Age_RecentorSingle, -X2.5_DateofInterrupted_RecentorSingle, -X2.5_Confirm_Interrupted, -X2.6_Attempt, -X2.6_Attempt_Age_First, -X2.6_Dateof_FirstAT, -X2.6_Days_From_FirstAT, -X2.6_RecentorSingle_AT, -X2.6_RecentorSingle_AT_date, -X2.6_Confirm_Attempt, -X2.6_Accuracy_first_time_age, -X4.1_WhatHappened, -X5_Method, -method_type1, -method_type2, -Num_Methods, -Num_Attempts_Prior_to_Admission, -Method_Other, -X5.4_How_Think_of_Method_ever, -Why_this_method, -Why_this_method_1_Peaceful.Neatness_2_Accessibility.Convenience_3_privacy_4_lethality, -X5.6_Thought_of_Pain, -X5.7_Thoughtof_OtherMethods, -Thought_of_other_Methods, -X5.8_Obtain_Method, -X5.10_Obtain_Method_Not.Sure_maybe_forsuicide, -X5.11_Obtain_Method_HowLong, -ObtainMethod_HowLong, -ObtainMethod_HowLong_Unit, -Obtain_Method_Date, -X5.12_Obtain_Method_When, -when_obtained_method) %>%
select(-X8.8_First_Action, -X8.9_First_Thing_Start, -Dec2Act_TimeUnit, -If.9.2.not.Sure..is.there.a.time.of.Sure..Yes...9.4..No...Seconds.before.attempt., -X9.2_When_decide_how_sure_would_attempt, -X9.4.Time.between.decision.and.attempt, -X10.1_prep, -X10.2_Prep_for_this_attempt, -X10.3.Prep..if.10.1.is.no., -X10.4_Num_Prep_Thoughts, -X10.5_Prep_Thoughts, -X10.6.Prep_Thoughts..if.10.4.is.no., -X11.1_Drugs_Before, -X11.2_HowLong, -X11.4_HowMuch_Before_Decision, -Quantity, -How_long_before_Time, -How_long_before_Time_Unit, -Drink_then_Decide, -Drink_Time, -Drink_Time_Unit, -X11.5_Decide_then_Drink, -X11.5_Decide_then_Drink_Quantity, -Decide_then_Drink_Time, -Decide_then_Drink_Time_Unit, -X12.1_Thoughts_About_Future, -Thoughts_Future_specific, -X12.2_1_positive_2_negative, -X12.3_Family_or_Friends, -Family_Friends_Specific, -FF_makesYou, -X12.4_Meaning_of_Death, -MeaningOfDeath_Specific, -MeaningOfDeath_MakeYou, -X12.5_AfterDeath_WhatWillHappen, -X12.6_What_Happens_After_Death, -WhatHappensAfter_MakeYou, -X12.7_PainBloodViolence, -PainBloodViolence_Specific, -PBV_MakeYou, -HowMuch_If_1_or_2, -X12.8_Reactions, -Reactions_Specific, -X12.10_Responsibilities, -Responsibilities_MakeYou, -Responsibilities_Specific, -X12.9_Dyingby_Suicide, -DieBySuicide_MakeYou, -X12.11.Why, -Circumstance.A, -Circumstance.B, -Circumstance.C, -Notes, -Notes.1, -X12.12.How.Long.A, -A.Time, -units, -How.Long.B, -B.Time, -units.1, -How.Long.C, -C.Time, -units.2, -Depr.for.Two.Weeks, -Injuries_SpecificDrug,-when_obtained_method_Unit, -Where_to_attempt, -X6.1_Where, -Ever_mulled, -NumMulling, -First_mulling_age, -Accuracy.of.first.mulling.age, -First_Thought_of.Method_1, -FirstThoughtof_Method_2, -First_Thoughtof_Method_2, -First_Thought_of.Method_1_Unit, -First_Thoughtof_Method_2_Unit, -First_Thought_of_Method_2_for_This_Attempt, -First_Thought_of_Method_2_for_This_Attempt_Unit, -X8.5_Mull_NoAct, -X8.6_Mull_NumTimes, -ABINT_Decision_StoppingTimeDiffuse)
##```
##```{r neitherThoughtsData}
neither_data <- data %>%
mutate(neither_ff = ifelse(family_friends_makes_you == 4, thoughts_family_friends, 0),
neither_meaning = ifelse(meaning_death_makes_you == 4, meaning_death, 0),
neither_pain = ifelse(thoughts_pain_makes_you == 4, thoughts_pain, 0),
neither_reactions = ifelse(reactions_makes_you == 4, thoughts_reactions, 0),
neither_responsibilities = ifelse(responsibilities_makes_you == 4, thoughts_responsibilities, 0)) %>%
mutate(neither_score = neither_ff + neither_meaning + neither_pain + neither_reactions + neither_responsibilities)
##```
##```{r THOUGHTscoreDATA}
thought_score_data <- neither_data %>%
group_by(Subject) %>%
mutate(ff_score = ifelse(family_friends_makes_you == 1, thoughts_family_friends, thoughts_family_friends * -1),
meaning_score = ifelse(meaning_death_makes_you == 1, meaning_death, meaning_death * -1),
pain_score = ifelse(thoughts_pain_makes_you == 1, thoughts_pain, thoughts_pain *-1),
reactions_score = ifelse(reactions_makes_you == 1, thoughts_reactions, thoughts_reactions *-1),
responsibilities_score = ifelse(responsibilities_makes_you == 1, thoughts_responsibilities, thoughts_responsibilities * -1)) %>%
mutate(ff_score = ifelse(is.na(ff_score), 0, ff_score),
meaning_score = ifelse(is.na(meaning_score), 0, meaning_score),
pain_score = ifelse(is.na(pain_score), 0, pain_score),
reactions_score = ifelse(is.na(reactions_score), 0, reactions_score),
responsibilities_score = ifelse(is.na(responsibilities_score), 0, responsibilities_score),
thoughts_score = ff_score + meaning_score + pain_score + reactions_score + responsibilities_score) %>%
mutate(thoughts_score_2 = ifelse(thoughts_about_future == 1,
1 + thoughts_family_friends
+ meaning_death
+ thoughts_pain
+ thoughts_reactions
+ thoughts_responsibilities,
0 + thoughts_family_friends
+ meaning_death
+ thoughts_pain
+ thoughts_reactions
+ thoughts_responsibilities),
ff_score_want = ifelse(!is.na(family_friends_makes_you),
ifelse(family_friends_makes_you %in% c(1,3), thoughts_family_friends, 0), 0),
meaning_score_want = ifelse(!is.na(meaning_death_makes_you),
ifelse(meaning_death_makes_you %in% c(1,3), meaning_death, 0), 0),
pain_score_want = ifelse(!is.na(thoughts_pain_makes_you),
ifelse(thoughts_pain_makes_you %in% c(1,3), thoughts_pain, 0), 0),
reactions_score_want = ifelse(!is.na(reactions_makes_you),
ifelse(reactions_makes_you %in% c(1,3), thoughts_reactions, 0), 0),
responsibilities_score_want = ifelse(!is.na(responsibilities_makes_you),
ifelse(responsibilities_makes_you %in% c(1,3), thoughts_responsibilities, 0), 0),
thoughts_want = ff_score_want + meaning_score_want + pain_score_want + reactions_score_want + responsibilities_score_want,
ff_score_not_want = ifelse(!is.na(family_friends_makes_you),
ifelse(family_friends_makes_you %in% c(2,3), thoughts_family_friends, 0), 0),
meaning_score_not_want = ifelse(!is.na(meaning_death_makes_you),
ifelse(meaning_death_makes_you %in% c(2,3), meaning_death, 0), 0),
pain_score_not_want = ifelse(!is.na(thoughts_pain_makes_you),
ifelse(thoughts_pain_makes_you %in% c(2,3), thoughts_pain, 0), 0),
reactions_score_not_want = ifelse(!is.na(reactions_makes_you),
ifelse(reactions_makes_you %in% c(2,3), thoughts_reactions, 0), 0),
responsibilities_score_not_want = ifelse(!is.na(responsibilities_makes_you),
ifelse(responsibilities_makes_you %in% c(2,3), thoughts_responsibilities, 0), 0),
thoughts_not_want = ff_score_not_want + meaning_score_not_want + pain_score_not_want + reactions_score_not_want + responsibilities_score_not_want) %>%
select(-ff_score_want, -meaning_score_want, -pain_score_want, -reactions_score_want, -responsibilities_score_want,
-ff_score_not_want, -meaning_score_not_want, -pain_score_not_want, -reactions_score_not_want, -responsibilities_score_not_want,
-ff_score, -meaning_score, -pain_score, -reactions_score, -responsibilities_score) %>%
mutate(thoughts_score = ifelse(x_axis_Num != 1, NA, thoughts_score),
thoughts_score_2 = ifelse(x_axis_Num !=1, NA, thoughts_score_2),
thoughts_want = ifelse(x_axis_Num != 1, NA, thoughts_want),
thoughts_not_want = ifelse(x_axis_Num != 1, NA, thoughts_not_want))
calculate <- function(x, y, dataframe) {
m1 <- lm(y~x, dataframe)
summary(m1)
}
calculateExpon <- function(x, y, dataframe) {
m1 <- lm(log(y)~x, dataframe)
summary(m1)
}
clean_data <- thought_score_data %>%
select(-thoughts_about_future, -thoughts_family_friends, -thoughts_pain, -thoughts_pain_makes_you, -thoughts_reactions, -thoughts_responsibilities, -thoughts_die_by_suicide, -meaning_death, -meaning_death_makes_you, -family_friends_makes_you, -reactions_makes_you, -responsibilities_makes_you, -y_axis)
##```
##```{r LifetimeSIdata}
data_lifetime <- clean_data %>%
group_by(Subject) %>%
mutate(onset_age = min(Time_in_age),
duration_ideation = max(Time_prior_to_attempt),
range_ideation = max(Ideation_freq) - min(Ideation_freq),
mean_ideation = mean(Ideation_freq),
sd_ideation = sd(Ideation_freq)) %>%
filter(!is.na(Age)) %>%
select(-x_axis_Num)
##```
##```{r TransformTimeUnits}
data_transformedTime <- data_lifetime %>%
mutate(ThoughtsStart_Seconds = ifelse(Start_thinking.about_this_attempt_Time_Unit == "weeks", Start_thinking.about_this_attempt_Time * 604800,
ifelse(Start_thinking.about_this_attempt_Time_Unit == "days", Start_thinking.about_this_attempt_Time * 86400,
ifelse(Start_thinking.about_this_attempt_Time_Unit == "hours", Start_thinking.about_this_attempt_Time * 3600,
ifelse(Start_thinking.about_this_attempt_Time_Unit == "minutes", Start_thinking.about_this_attempt_Time * 60,
ifelse(Start_thinking.about_this_attempt_Time_Unit == "years", Start_thinking.about_this_attempt_Time * 31536000,
ifelse(Start_thinking.about_this_attempt_Time_Unit == "months", Start_thinking.about_this_attempt_Time*2592000,
Start_thinking.about_this_attempt_Time))))))) %>%
mutate(MullingStarts_Seconds = ifelse(Mulled_for_how_long_beforeAttempt_OR_atTheMostRecentMulling_Unit == "weeks",
Mulled_for_how_long_beforeAttempt_OR_atTheMostRecentMulling * 604800,
ifelse(Mulled_for_how_long_beforeAttempt_OR_atTheMostRecentMulling_Unit == "days",
Mulled_for_how_long_beforeAttempt_OR_atTheMostRecentMulling * 86400,
ifelse(Mulled_for_how_long_beforeAttempt_OR_atTheMostRecentMulling_Unit == "hours",
Mulled_for_how_long_beforeAttempt_OR_atTheMostRecentMulling * 3600,
ifelse(Mulled_for_how_long_beforeAttempt_OR_atTheMostRecentMulling_Unit == "minutes",
Mulled_for_how_long_beforeAttempt_OR_atTheMostRecentMulling * 60,
ifelse(Mulled_for_how_long_beforeAttempt_OR_atTheMostRecentMulling_Unit == "years",
Mulled_for_how_long_beforeAttempt_OR_atTheMostRecentMulling * 31536000,
ifelse(Mulled_for_how_long_beforeAttempt_OR_atTheMostRecentMulling_Unit == "months",
Mulled_for_how_long_beforeAttempt_OR_atTheMostRecentMulling * 2592000,
Mulled_for_how_long_beforeAttempt_OR_atTheMostRecentMulling))))))) %>%
mutate(Decision_Seconds = ifelse(Decision_time_Unit == "weeks", Decision_time * 604800,
ifelse(Decision_time_Unit == "days", Decision_time * 86400,
ifelse(Decision_time_Unit == "hours", Decision_time * 3600,
ifelse(Decision_time_Unit == "minutes", Decision_time * 60,
ifelse(Decision_time_Unit == "years", Decision_time * 31536000,
ifelse(Decision_time_Unit == "months", Decision_time * 2592000, Decision_time))))))) %>%
mutate(FirstMethod_Seconds = ifelse(First_think_of_method_1_for_this_attempt_Unit == "weeks", First_think_of_method_1_for_this_attempt * 604800,
ifelse(First_think_of_method_1_for_this_attempt_Unit == "days", First_think_of_method_1_for_this_attempt * 86400,
ifelse(First_think_of_method_1_for_this_attempt_Unit == "hours", First_think_of_method_1_for_this_attempt * 3600,
ifelse(First_think_of_method_1_for_this_attempt_Unit == "minutes", First_think_of_method_1_for_this_attempt * 60,
ifelse(First_think_of_method_1_for_this_attempt_Unit == "years",
First_think_of_method_1_for_this_attempt * 31536000,
ifelse(First_think_of_method_1_for_this_attempt_Unit == "months",
First_think_of_method_1_for_this_attempt * 2592000,
First_think_of_method_1_for_this_attempt))))))) %>%
mutate(SureMethod_Seconds = ifelse(Sure_of_Method_Unit == "weeks", Sure_of_Method * 604800,
ifelse(Sure_of_Method_Unit == "days", Sure_of_Method * 86400,
ifelse(Sure_of_Method_Unit == "hours", Sure_of_Method * 3600,
ifelse(Sure_of_Method_Unit == "minutes", Sure_of_Method * 60,
ifelse(Sure_of_Method_Unit == "years", Sure_of_Method * 31536000,
ifelse(Sure_of_Method_Unit == "months", Sure_of_Method * 2592000, Sure_of_Method))))))) %>%
mutate(FirstPlace_Seconds = ifelse(X6.3_First_thinkof_place_for_this_attempt_Unit == "years", X6.3_First_thinkof_place_for_this_attempt * 31536000,
ifelse(X6.3_First_thinkof_place_for_this_attempt_Unit == "months", X6.3_First_thinkof_place_for_this_attempt * 2592000,
ifelse(X6.3_First_thinkof_place_for_this_attempt_Unit == "weeks", X6.3_First_thinkof_place_for_this_attempt * 604800,
ifelse(X6.3_First_thinkof_place_for_this_attempt_Unit == "days", X6.3_First_thinkof_place_for_this_attempt * 86400,
ifelse(X6.3_First_thinkof_place_for_this_attempt_Unit == "hours", X6.3_First_thinkof_place_for_this_attempt * 3600,
ifelse(X6.3_First_thinkof_place_for_this_attempt_Unit == "minutes",
X6.3_First_thinkof_place_for_this_attempt * 60, X6.3_First_thinkof_place_for_this_attempt))))))) %>%
mutate(SurePlace_Seconds = ifelse(FirstTime_sureof_place_for_This_Attempt_Unit == "years", FirstTime_sureof_place_for_This_Attempt * 31536000,
ifelse(FirstTime_sureof_place_for_This_Attempt_Unit == "months", FirstTime_sureof_place_for_This_Attempt * 2592000,
ifelse(FirstTime_sureof_place_for_This_Attempt_Unit == "weeks", FirstTime_sureof_place_for_This_Attempt * 604800,
ifelse(FirstTime_sureof_place_for_This_Attempt_Unit == "days", FirstTime_sureof_place_for_This_Attempt * 86400,
ifelse(FirstTime_sureof_place_for_This_Attempt_Unit == "hours", FirstTime_sureof_place_for_This_Attempt * 3600,
ifelse(FirstTime_sureof_place_for_This_Attempt_Unit == "minutes",
FirstTime_sureof_place_for_This_Attempt * 60, FirstTime_sureof_place_for_This_Attempt)))))))
##```
## ```{r BinsTotalPthwy}
five_year <- 5*365*24*60*60
one_year <- 365*24*60*60
six_month <- one_year/2
one_month <- 30*24*60*60
two_week <- 14*24*60*60
one_week <- 7*24*60*60
three_day <- 3*24*60*60
one_day <- 24*60*60
an_hour <- 60*60
a_minute <- 60
data_totalPthwy <- data_transformedTime %>%
mutate(MullingStarts_Seconds_index =
ifelse(MullingStarts_Seconds <= a_minute, 17,
ifelse(MullingStarts_Seconds <= a_minute*5, 16,
ifelse(MullingStarts_Seconds <= a_minute*15, 15,
ifelse(MullingStarts_Seconds <= a_minute*30, 14,
ifelse(MullingStarts_Seconds <= an_hour, 13,
ifelse(MullingStarts_Seconds <= an_hour*2, 12,
ifelse(MullingStarts_Seconds <= an_hour*3, 11,
ifelse(MullingStarts_Seconds <= an_hour*6, 10,
ifelse(MullingStarts_Seconds <= an_hour*12, 9,
ifelse(MullingStarts_Seconds <= one_day, 8,
ifelse(MullingStarts_Seconds <= one_day*3, 7,
ifelse(MullingStarts_Seconds <= one_week, 6,
ifelse(MullingStarts_Seconds <= two_week, 5,
ifelse(MullingStarts_Seconds <= one_month, 4,
ifelse(MullingStarts_Seconds <= six_month, 3,
ifelse(MullingStarts_Seconds <= one_year, 2,
ifelse(MullingStarts_Seconds <= five_year, 1, 0
)))))))))))))))))) %>%
mutate(Decision_Seconds_index =
ifelse(Decision_Seconds <= a_minute, 17,
ifelse(Decision_Seconds <= a_minute*5, 16,
ifelse(Decision_Seconds <= a_minute*15, 15,
ifelse(Decision_Seconds <= a_minute*30, 14,
ifelse(Decision_Seconds <= an_hour, 13,
ifelse(Decision_Seconds <= an_hour*2, 12,
ifelse(Decision_Seconds <= an_hour*3, 11,
ifelse(Decision_Seconds <= an_hour*6, 10,
ifelse(Decision_Seconds <= an_hour*12, 9,
ifelse(Decision_Seconds <= one_day, 8,
ifelse(Decision_Seconds <= one_day*3, 7,
ifelse(Decision_Seconds <= one_week, 6,
ifelse(Decision_Seconds <= two_week, 5,
ifelse(Decision_Seconds <= one_month, 4,
ifelse(Decision_Seconds <= six_month, 3,
ifelse(Decision_Seconds <= one_year, 2,
ifelse(Decision_Seconds <= five_year, 1, 0
)))))))))))))))))) %>%
mutate(SurePlace_Seconds_index =
ifelse(SurePlace_Seconds <= a_minute, 17,
ifelse(SurePlace_Seconds <= a_minute*5, 16,
ifelse(SurePlace_Seconds <= a_minute*15, 15,
ifelse(SurePlace_Seconds <= a_minute*30, 14,
ifelse(SurePlace_Seconds <= an_hour, 13,
ifelse(SurePlace_Seconds <= an_hour*2, 12,
ifelse(SurePlace_Seconds <= an_hour*3, 11,
ifelse(SurePlace_Seconds <= an_hour*6, 10,
ifelse(SurePlace_Seconds <= an_hour*12, 9,
ifelse(SurePlace_Seconds <= one_day, 8,
ifelse(SurePlace_Seconds <= one_day*3, 7,
ifelse(SurePlace_Seconds <= one_week, 6,
ifelse(SurePlace_Seconds <= two_week, 5,
ifelse(SurePlace_Seconds <= one_month, 4,
ifelse(SurePlace_Seconds <= six_month, 3,
ifelse(SurePlace_Seconds <= one_year, 2,
ifelse(SurePlace_Seconds <= five_year, 1, 0
)))))))))))))))))) %>%
mutate(FirstMethod_Seconds_index =
ifelse(FirstMethod_Seconds <= a_minute, 17,
ifelse(FirstMethod_Seconds <= a_minute*5, 16,
ifelse(FirstMethod_Seconds <= a_minute*15, 15,
ifelse(FirstMethod_Seconds <= a_minute*30, 14,
ifelse(FirstMethod_Seconds <= an_hour, 13,
ifelse(FirstMethod_Seconds <= an_hour*2, 12,
ifelse(FirstMethod_Seconds <= an_hour*3, 11,
ifelse(FirstMethod_Seconds <= an_hour*6, 10,
ifelse(FirstMethod_Seconds <= an_hour*12, 9,
ifelse(FirstMethod_Seconds <= one_day, 8,
ifelse(FirstMethod_Seconds <= one_day*3, 7,
ifelse(FirstMethod_Seconds <= one_week, 6,
ifelse(FirstMethod_Seconds <=two_week, 5,
ifelse(FirstMethod_Seconds <= one_month, 4,
ifelse(FirstMethod_Seconds <= six_month, 3,
ifelse(FirstMethod_Seconds <= one_year, 2,
ifelse(FirstMethod_Seconds <= five_year, 1, 0
))))))))))))))))))  %>%
mutate(ThoughtsStart_Seconds_index =
ifelse(ThoughtsStart_Seconds <= a_minute, 17,
ifelse(ThoughtsStart_Seconds <= a_minute*5, 16,
ifelse(ThoughtsStart_Seconds <= a_minute*15, 15,
ifelse(ThoughtsStart_Seconds <= a_minute*30, 14,
ifelse(ThoughtsStart_Seconds <= an_hour, 13,
ifelse(ThoughtsStart_Seconds <= an_hour*2, 12,
ifelse(ThoughtsStart_Seconds <= an_hour*3, 11,
ifelse(ThoughtsStart_Seconds <= an_hour*6, 10,
ifelse(ThoughtsStart_Seconds <= an_hour*12, 9,
ifelse(ThoughtsStart_Seconds <= one_day, 8,
ifelse(ThoughtsStart_Seconds <= one_day*3, 7,
ifelse(ThoughtsStart_Seconds <= one_week, 6,
ifelse(ThoughtsStart_Seconds <=two_week, 5,
ifelse(ThoughtsStart_Seconds <= one_month, 4,
ifelse(ThoughtsStart_Seconds <= six_month, 3,
ifelse(ThoughtsStart_Seconds <= one_year, 2,
ifelse(ThoughtsStart_Seconds <= five_year, 1, 0
)))))))))))))))))) %>%
mutate(FirstPlace_Seconds_index =
ifelse(FirstPlace_Seconds <= a_minute, 17,
ifelse(FirstPlace_Seconds <= a_minute*5, 16,
ifelse(FirstPlace_Seconds <= a_minute*15, 15,
ifelse(FirstPlace_Seconds <= a_minute*30, 14,
ifelse(FirstPlace_Seconds <= an_hour, 13,
ifelse(FirstPlace_Seconds <= an_hour*2, 12,
ifelse(FirstPlace_Seconds <= an_hour*3, 11,
ifelse(FirstPlace_Seconds <= an_hour*6, 10,
ifelse(FirstPlace_Seconds <= an_hour*12, 9,
ifelse(FirstPlace_Seconds <= one_day, 8,
ifelse(FirstPlace_Seconds <= one_day*3, 7,
ifelse(FirstPlace_Seconds <= one_week, 6,
ifelse(FirstPlace_Seconds <=two_week, 5,
ifelse(FirstPlace_Seconds <= one_month, 4,
ifelse(FirstPlace_Seconds <= six_month, 3,
ifelse(FirstPlace_Seconds <= one_year, 2,
ifelse(FirstPlace_Seconds <= five_year, 1, 0
)))))))))))))))))) %>%
mutate(SureMethod_Seconds_index =
ifelse(SureMethod_Seconds <= a_minute, 17,
ifelse(SureMethod_Seconds <= a_minute*5, 16,
ifelse(SureMethod_Seconds <= a_minute*15, 15,
ifelse(SureMethod_Seconds <= a_minute*30, 14,
ifelse(SureMethod_Seconds <= an_hour, 13,
ifelse(SureMethod_Seconds <= an_hour*2, 12,
ifelse(SureMethod_Seconds <= an_hour*3, 11,
ifelse(SureMethod_Seconds <= an_hour*6, 10,
ifelse(SureMethod_Seconds <= an_hour*12, 9,
ifelse(SureMethod_Seconds <= one_day, 8,
ifelse(SureMethod_Seconds <= one_day*3, 7,
ifelse(SureMethod_Seconds <= one_week, 6,
ifelse(SureMethod_Seconds <=two_week, 5,
ifelse(SureMethod_Seconds <= one_month, 4,
ifelse(SureMethod_Seconds <= six_month, 3,
ifelse(SureMethod_Seconds <= one_year, 2,
ifelse(SureMethod_Seconds <= five_year, 1, 0
))))))))))))))))))
##```
##```{r calculateTotalPthwyMean}
# according to the ipynb calculation
data_totalPthwy <- data_totalPthwy %>%
mutate(researched = ifelse(Research_1_YES_2_NO_3_InPast_4_YES_but_not_on_Method != 2, 1, 0),
obtainedMethod = ifelse(X5.9_Obtain_Method_Sure_useforsuicide == 1, 1, 0),
drank_before_after = ifelse(X11.3_Decide_before_or_after != 1, ifelse(X11.3_Decide_before_or_after == "Both", 1, 0), 1),
NumPrep_Total = ifelse(!is.na(NumPrep),
ifelse(!is.na(researched),
ifelse(!is.na(obtainedMethod),
ifelse(!is.na(drank_before_after),
NumPrep+researched+obtainedMethod+drank_before_after,
NumPrep+researched+obtainedMethod),
ifelse(!is.na(drank_before_after), NumPrep+researched+drank_before_after)),
ifelse(!is.na(obtainedMethod),
ifelse(!is.na(drank_before_after), NumPrep+obtainedMethod+drank_before_after, NumPrep+obtainedMethod),
ifelse(!is.na(drank_before_after), NumPrep+drank_before_after, NumPrep))),
ifelse(!is.na(researched),
ifelse(!is.na(obtainedMethod),
ifelse(!is.na(drank_before_after), researched+obtainedMethod+drank_before_after, researched+obtainedMethod),
ifelse(!is.na(drank_before_after), researched+drank_before_after, researched)),
ifelse(!is.na(obtainedMethod),
ifelse(!is.na(drank_before_after), obtainedMethod+drank_before_after,obtainedMethod),
ifelse(!is.na(drank_before_after), drank_before_after, NA)))),
TotalPthwy_Max = max(MullingStarts_Seconds_index, Decision_Seconds_index, SurePlace_Seconds_index, SureMethod_Seconds_index, ThoughtsStart_Seconds_index, FirstPlace_Seconds_index, FirstMethod_Seconds_index))
data_totalPthwy$Pthwy_mean = rowMeans(subset(data_totalPthwy, select = c(MullingStarts_Seconds_index, Decision_Seconds_index, SurePlace_Seconds_index, SureMethod_Seconds_index, ThoughtsStart_Seconds_index, FirstPlace_Seconds_index, FirstMethod_Seconds_index)), na.rm = TRUE)
data_totalPthwy <- data_totalPthwy %>%
mutate(TotalpthwyMean = ifelse(!is.na(NumPrep_Total),
ifelse(!is.na(TotalPthwy_Max),
Pthwy_mean + TotalPthwy_Max * 0.5 + NumPrep_Total,
NumPrep_Total + Pthwy_mean),
ifelse(!is.na(TotalPthwy_Max),
TotalPthwy_Max * 0.5 + Pthwy_mean,
Pthwy_mean)))
write_csv(data_totalPthwy, "./Data/updated_june22_2020.csv")
